`r if(knitr:::is_latex_output()) '\\appendix'`

`r if(!knitr:::is_latex_output()) '# (APPENDIX) Appendix {-}'` 

<!--
If you feel it necessary to include an appendix, it goes here.
-->


# Autoimpute References

`Autoimpute` is an open-source Python package distributed under the MIT license. The package is hosted on github and registered with the official Python Package Index. The authors also host a website that explores Autoimpute in more detail and provides in-depth tutorials on how end-users can get the most out of the package. The table below provides links to the package and the author's website.

```{r appendixa, echo=FALSE, warning=FALSE}
text_tbl <- data.frame(
  Source = c("Github", "PyPI", "Website"),
  Link = c(
    "https://github.com/kearnz/autoimpute",
    "https://pypi.org/project/autoimpute/",
    "https://kearnz.github.io/autoimpute-tutorials/"
  )
)

kable(text_tbl, caption="Autoimpute Sources", booktabs=TRUE, escape=FALSE) %>%
  kable_styling(position="left", full_width=TRUE, latex_options=c("hold_position")) %>%
  row_spec(0, bold=TRUE, font_size=13) %>%
  column_spec(1, width="5em")
```

# Missingness Notation Cheatsheet

```{r appendixbnotation, echo=FALSE, warning=FALSE}
text_tbl <- data.frame(
  Notation = c(
    "$n$",
    "$p$",
    "$Y$",
    "$Y_{obs}$",
    "$Y_{mis}$",
    "$y_{ij}$",
    "$R$",
    "$r_{ij}$",
    "$\\psi$",
    "$m$",
    "$I_j$",
    "$O_j$",
    "$Q$",
    "$\\hat Q$",
    "$U$",
    "$\\bar Q$",
    "$\\bar U$",
    "$B$",
    "$T$"
    ),
  Description = c(
    "The number of records or observations in a matrix",
    "The number of columns or features in a matrix",
    "The complete data matrix of observed and missing records",
    "Records within $Y$ that are completely observed for all columns $p$",
    "Records within $Y$ with a missing value in any column in $p$",
    "A scalar value $y$ in row $i$ and column $j$ of matrix $Y$",
    "The missing indicator matrix, where each value $r_{ij} \\in 0,1$",
    "A scalar value $r$ in row $i$ and column $j$ of matrix $R$",
    "The parameters of the missing data model",
    "The number of complete datasets $Y$ to impute independently",
    "The influx coefficient",
    "The outflux coefficient",
    "The population parameter of scientific interest",
    "The estimate for $Q$ using hypothetically complete data",
    "The variance-covariance matrix of estimate $\\hat Q$",
    "The pooled parameter estimate of $Q$ under multiple imputation",
    "The variance-within under multiple imputation",
    "The variance-between under multiple imputation",
    "The total variance under multiple imputation"
  )
)

kable(text_tbl, caption ="Notation", booktabs=TRUE, longtable=TRUE, escape=FALSE) %>%
  kable_styling(position="left", full_width=TRUE, latex_options=c("hold_position")) %>%
  row_spec(0, bold=TRUE, font_size=13) %>%
  column_spec(1, width="5em")
```

# Missingess Expression Cheatsheet

```{r appendixcexpressions, echo=FALSE, warning=FALSE}

text_tbl <- data.frame(
  Expression = c(
    "$Y = (Y_{mis}, Y_{obs})$",
    "$r_{ij} = 0$",
    "$r_{ij} = 1$",
    "$P(R\\mid Y_{obs}, Y_{mis},\\psi)$",
    "$P(R=0\\mid Y_{obs},Y_{mis},\\psi) = P(R=0\\mid \\psi)$",
    "$P(R=0\\mid Y_{obs},Y_{mis},\\psi) = P(R=0\\mid Y_{obs}, \\psi)$",
    "$P(Y_{mis}\\mid Y_{obs}, R)$",
    "$P(Y\\mid Y_{obs}, R=1) = P(Y\\mid Y_{obs}, R=0)$",
    "$I_j = \\frac{\\sum_j^p\\sum_k^p\\sum_i^n (1-r_{ij})r_{ik}}{\\sum_k^p\\sum_i^n r_{ik}}$",
    "$O_j = \\frac{\\sum_j^p\\sum_k^p\\sum_i^n r_{ij}(1-r_{ik})}{\\sum_k^p\\sum_i^n 1-r_{ij}}$",
    "$E(\\hat Q|Y) = Q$",
    "$\\bar Q = \\frac{1}{m}\\sum_{\\ell=1}^m \\hat Q_\\ell$",
    "$\\bar U = \\frac{1}{m}\\sum_{\\ell=1}^m \\bar U_\\ell$",
    "$B = \\frac{1}{m-1}\\sum_{\\ell=1}^m (\\hat Q_\\ell-\\bar Q)(\\hat Q_\\ell-\\bar Q)'$",
    "$T = \\bar U + B + \\frac{B}{m}$"
    ),
  Description = c(
    "The complete data matrix equals the conjoined $Y_{obs}$ and $Y_{mis}$",
    "When a value $r_{ij}=0$, the corresponding value $y_{ij}$ is missing",
    "When a value $r_{ij}=1$, the corresponding value $y_{ij}$ is observed",
    "General expression for a missing data model. Also form for MNAR",
    "Reducible form of the missing data model under MCAR",
    "Reducible form of the missing data model under MAR",
    "General expression for an imputation model",
    "Implication of ignorability in which imputation models can safely ignore $\\psi$",
    "The forumla for influx coefficient",
    "The formula for outflux coefficient",
    "The equality necessary for unbiasedness of an estimate $\\hat Q$ conditional on $Y$",
    "The pooled estimate for $Q$ is the mean of $m$ $\\hat Q$ estimates from $m$ imputations",
    "The variance within is the mean of the $m$ $\\hat U$ estimates from $m$ imputations",
    "The variance between is the additional variance in estimating $\\hat Q$ during $m$ imputations",
    "The total variance is the sum of variance within, variance between, and added variance from finite number of imputations $m$"
  )
)

kable(text_tbl, caption="Expressions", booktabs=TRUE, longtable=TRUE, escape=FALSE) %>%
  kable_styling(position="left", full_width=TRUE, latex_options=c("hold_position")) %>%
  row_spec(0, bold=TRUE, font_size=13)
```


# Concepts Related to Missingness

```{r appendixdconcepts, echo=FALSE, warning=FALSE}

text_tbl <- data.frame(
  Concept = c(
    "complete data matrix",
    "missing indicator matrix",
    "missing data mechanism",
    "missing data model",
    "MCAR",
    "MAR",
    "MNAR",
    "ignorability",
    "missing data pattern",
    "missing data method",
    "deletion",
    "imputation model",
    "analysis model",
    "target",
    "univariate",
    "multivariate",
    "missing data pattern",
    "single imputation",
    "multiple imputation",
    "influx",
    "outflux",
    "pooled parameter estimate",
    "variance within",
    "variance between",
    "total variance"
    ),
  Definition = c(
    "The complete matrix $Y$, which is comprised of $Y_{obs}$ and $Y_{mis}$",
    "Missing indicator $R$ suggests which values in $Y$ are missing",
    "Process that governs relationship b/w observed and $P(missing)$",
    "Formalizes relationship specified by missing data mechanism",
    "Missing data mechanism depends on $\\psi$ only",
    "Missing data mechanism depends on $Y_{obs}$ and $\\psi$ only",
    "Missing data mechanism depends on $Y_{obs}$, $Y_{mis}$, and $\\psi$",
    "Criteria required for imputation models to ignore $\\psi$",
    "Various ways in which data can be missing throughout a dataset",
    "Method used to handle missing data. Use deletion or imputation",
    "Discard missing values from the dataset",
    "Replace missing values with imputations from imputation model",
    "A supervised machine learning model applied to imputed data",
    "Column with missing values to be imputed",
    "Models using target to determine imputation for target",
    "Models using features to predict imputed values for target",
    "Pattern suggesting information transferrable b/w variables",
    "Impute missing values once prior to analysis",
    "Impute missing values $m$ times prior to analysis",
    "Candidates to be imputed using the other predictors",
    "Variables useful as predictors to impute a target variable",
    "The coefficients of an analysis model under multiple imputation",
    "The average of the variance of the parameter estimate from each imputation",
    "The variance introduced from different parameter estimates across imputations",
    "The accurate representation of variance under multiple imputation"
  )
)

kable(text_tbl, caption="Concepts", booktabs=TRUE, longtable=TRUE, escape=FALSE) %>%
  kable_styling(position="left", full_width=TRUE, latex_options=c("hold_position")) %>%
  row_spec(0, bold=TRUE, font_size=13)  %>%
  column_spec(1, width="7em")
```

# Univariate Imputation Methods

```{r appendixeunivar, echo=FALSE, warning=FALSE}

text_tbl <- data.frame(
  Method = c(
    "mean",
    "median",
    "mode",
    "random",
    "norm",
    "categorical",
    "interpolation",
    "last observation carried forward (LOCF)",
    "next observation carried backward (NOCB)"
    ),
  Description = c(
    "Mean imputation finds the mean of observed values in target variable $y$. It then imputes any missing values in $y$ with the observed mean.",
    "Median imputation finds the median of observed values in target variable $y$. It then imputes any missing values in $y$ with the observed median.",
    "Mode imputation finds the mode of observed values in target variable $y$. It then imputes any missing values in $y$ with the observed mode. If multiple modes exist, Autoimpute gives users the option to take the first mode, the last mode, or randomly sample the modes when imputing missing values.",
    "Random imputation imputes each missing value in target $y$ by randomly sampling from the observed values in $y$.",
    "Norm imputation constructs a normal distribution parameterized by the mean and variance of the observed values in target $y$. Missing values are then imputed with random draws from the constructed normal distribution.",
    "Categorical imputation constructs a discrete categorical distribution parameterized by the proportions of each distinct label in target $y$. Missing values are then imputed with draws from the constructed categorical distribution, where the probability of a given label being drawn depends on its proportion within the categorical distribution.",
    "Interpolation imputation constructs new data points within the range of a discrete set of known data points. Autoimpute supports linear, quadratic, cubic, polynomial, and spline interpolation.",
    "LOCF imputes missing values by carrying forward the last observed value. Therefore, the method respects the order of the records in target $y$.",
    "NOCB imputes missing values by carrying backward the next observed value. Therefore, the method respects the order of the records in target $y$."
  )
)

kable(text_tbl, caption="Univariate Methods", booktabs=TRUE, longtable=TRUE, escape=FALSE) %>%
  kable_styling(position="left", full_width=TRUE, latex_options=c("hold_position")) %>%
  row_spec(0, bold=TRUE, font_size=13)  %>%
  column_spec(1, width="7em")
```

# Multivariate Imputation Methods

```{r appendixfmultivar, echo=FALSE, warning=FALSE}

text_tbl <- data.frame(
  Method = c(
    "linear regression",
    "binomial logistic regression",
    "multinomial logistic regression",
    "stochastic regression",
    "bayesian linear regression",
    "bayesian binary logistic regression",
    "predictive mean matching (PMM)",
    "local residual draws (LRD)"
    ),
  Description = c(
    "Linear Regression imputation fits a linear model on observed data, where $y$ is the target variable to be imputed and $X$ is the design matrix. The model then finds the records in $X$ where $y$ is missing. These records in $X$ are used to generate predictions from the linear model. Those predictions become the imputations for missing values in $y$",
    "Binary Logistic Regression imputation fits a binary logistic model on observed data, where $y$ is the target variable to be imputed and $X$ is the design matrix. The model then finds the records in $X$ where $y$ is missing. These records in $X$ are used to generate predictions from the binary logistic model. Those predictions become the imputations for missing values in $y$",
    "Multinomial Logistic Regression imputation fits a multinomial logistic model on observed data, where $y$ is the target variable to be imputed and $X$ is the design matrix. The model then finds the records in $X$ where $y$ is missing. These records in $X$ are used to generate predictions from the multinomial logistic model. Those predictions become the imputations for missing values in $y$",
    "Stochastic Regression imputation fits a linear model on observed data, where $y$ is the target variable to be imputed and $X$ is the design matrix. The algorithm then stores a normal distribution for the errors from the fit linear model. The model then finds the records in $X$ where $y$ is missing. These records in $X$ are used to generate predictions from the linear model. For each prediction, the algorithm adds a random draw from the distribution of errors. Those predictions + random draws become the imputations for missing values in $y$",
    "Bayesian linear regression imputation imputes missing values using random draws from the posterior predictive distribution of the missing data $Y_{mis}$. These draws take into account the posterior distribution of the linear model parameters, which in this case are $\\hat{\\beta}$ coefficients.",
    "Bayesian binary logistic regression imputation imputes missing values using random draws from the posterior predictive distribution of the missing data $Y_{mis}$. These draws take into account the posterior distribution of the binary logistic model parameters, which in this care are the probabilities of class membership.",
    "PMM imputation is a multi-step procedure. First, a linear model is fit on the observed data for target $y$ and $X$ to obtain $\\hat{\\beta}$ coefficients. Then, a bayesian model is fit, and the algorithm produces a new set of $\\dot{\\beta}$ coefficients using random draws from the posterior predictive distribution of $\\hat{\\beta}$. The coefficients $\\hat{\\beta}$ are used to make predictions for observed $y$, while $\\dot{\\beta}$ are used to make predictions for missing $y$. For each case where $y$ is missing, the algorithm finds the closest $n$ predicted values among cases where $y$ is observed. The algorithm then randomly samples the $n$ closest predictions, selecting one, and eventually imputes the missing data with the truly observed value of $y$. The standard distance used to measure 'closeness' is manhattan distance. $n$ represents the number of neighbors to find, which generally defaults to 5.",
    "LRD imputation begins by replicating the process for PMM. Once the truly observed value of $y$ is selected through the PMM process, LRD adds the distance to that value. The missing value is then imputed using the sum of the observed value of $y$ and the distance."
  )
)

kable(text_tbl, caption="Multivariate Methods", booktabs=TRUE, longtable=TRUE, escape=FALSE) %>%
  kable_styling(position="left", full_width=TRUE, latex_options=c("hold_position")) %>%
  row_spec(0, bold=TRUE, font_size=13)  %>%
  column_spec(1, width="7em")
```
